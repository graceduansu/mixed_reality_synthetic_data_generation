<?xml version="1.0" encoding="utf-8"?>

<!-- Render test for 3 low-poly cars and one ground plane -->

<scene version="0.5.0">
    <integrator type="volpath">
        <integer name="rrDepth" value="5" />
        <boolean name="hideEmitters" value="true" />
    </integrator>

    <emitter type="sunsky">
		<float name="turbidity" value="3" />
		<float name="latitude" value="40.44694" />
		<float name="longitude" value="-79.94902" />
		<float name="timezone" value="-4" />

		<integer name="year" value="2010" />
		<integer name="month" value="07" />
		<integer name="day" value="10" />

		<float name="hour" value="16" />
		<float name="minute" value="30" />

		<float name="sunScale" value="3" />
		<float name="skyScale" value="3" />

	</emitter>

    <sensor type="perspective">
        <string name="fovAxis" value="smaller" />

        <transform name="toWorld">

            <matrix value="  -6.32009074e-01 3.81421015e-01  6.74598057e-01 -1.95597297e+01
            5.25615099e-03 8.72582680e-01 -4.88438164e-01  6.43714192e+00 
            -7.74943161e-01  -3.05151563e-01 -5.53484978e-01  4.94516235e+00 
            0 0 0 1" />
            
        </transform>
        <float name="fov" value="60" />

        <sampler type="ldsampler">
            <integer name="sampleCount" value="16" />
        </sampler>

        <film type="ldrfilm">
            <string name="pixelFormat" value="rgba" />
            <integer name="width" value="512" />
            <integer name="height" value="512" />
            <boolean name="banner" value="false" />
            <rfilter type="gaussian" />
            <!-- <string name="label[10, 10]" value="camera transform: $sensor['toWorld']" /> -->

        </film>
    </sensor>


     <shape type="obj">
        <string name="filename" value="assets/ground.obj" />
        <transform name="toWorld">
            <matrix value="1 0 0 0  
            0 1 0 0  
            0 0 1 0  
            0 0 0 1" />
            
            <scale value="1"/>
        </transform>


        <bsdf type="twosided">
            <bsdf type="roughdiffuse">
                <spectrum name="reflectance" value="0.5" />
                <texture type="bitmap" name="reflectance">
                    <string name="filename" value="assets/background.jpg" />
                    <float name="vscale" value="0.2" />
                    <float name="uscale" value="0.2" />
                    <float name="uoffset" value="0.8" />
                    <float name="voffset" value="0.8" />
                </texture>
            </bsdf>
        </bsdf>

    </shape> 

    <shape type="obj">
		<string name="filename" value="../cars_test/meshes/car/1e2f9cb6b33c92ea82381b04bbe0ce6d/model.obj"/>
		
		<transform name="toWorld">
			
			<matrix value="1 0 0 0  
            0 1 0 0  
            0 0 1 0  
            0 0 0 1" />
            <translate x="0" y="0.16" z="0" />
            <scale value="5"/>
			
		</transform>
	</shape>

    <shape type="obj">
		<string name="filename" value="../cars_test/meshes/car/857a3a01bd311511f200a72c9245aee7/model.obj"/>
		
		<transform name="toWorld">
			
			<matrix value="1 0 0 0  
            0 1 0 0  
            0 0 1 0  
            0 0 0 1" />
            <rotate x="0" y="1" z="0" angle="-35" />
            <translate x="-2" y="0.16" z="0" />
            <scale value="5"/>
            
			
		</transform>
	</shape>

    <shape type="obj">
		<string name="filename" value="../cars_test/meshes/car/ff5ad56515bc0167500fb89d8b5ec70a/model.obj"/>
		
		<transform name="toWorld">
			
			<matrix value="1 0 0 0  
            0 1 0 0  
            0 0 1 0  
            0 0 0 1" />
            
            <rotate x="0" y="1" z="0" angle="90" />
            <translate x="-1" y="0.16" z="-2" />
            <scale value="5"/>
            
			
		</transform>
	</shape>

</scene>